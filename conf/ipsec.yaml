#
# ipsec.yaml
#

#
# /v2.0/vpn/vpnservices
#
iida-az1-vpnservice:

  vpnservice:

    # 名前
    name: iida-az1-vpnservice

    # ルータID
    router_id: ffbd70be-24cf-4dff-a4f6-661bf892e313

    # サブネットID
    subnet_id: abbbbcf4-ea8f-4218-bbe7-669231eeba30

    # アベイラビリティゾーン
    # jp-east-1a
    # jp-east-1b
    availability_zone: jp-east-1a


#
# /v2.0/vpn/ikepolicies
#
iida-az1-ikepolicy:

  ikepolicy:

    # 名前
    name: iida-az1-ikepolicy

    # IKEバージョン
    ike_version: v1

    # メインモード
    phase1_negotiation_mode: main

    # 認証
    auth_algorithm: sha1

    # 暗号
    encryption_algorithm: aes-256

    # PFS
    pfs: group14

    # ライフタイム
    lifetime:
      units: seconds
      value: 86400

    # アベイラビリティゾーン
    # jp-east-1a
    # jp-east-1b
    availability_zone: jp-east-1a


#
# /v2.0/vpn/ipsecpolicies
#
iida-az1-ipsecpolicy:

  ipsecpolicy:

    # 名前
    name: iida-az1-ipsecpolicy

    # トランスフォーム
    transform_protocol: esp

    # 認証
    auth_algorithm: sha1

    # カプセル化
    encapsulation_mode: tunnel

    # 暗号アルゴリズム
    encryption_algorithm: aes-256

    # PFS
    pfs: group14

    # ライフタイム
    lifetime:
      units: seconds
      value: 28800

    # アベイラビリティゾーン
    # jp-east-1a
    # jp-east-1b
    availability_zone: jp-east-1a


## コネクションごとに設定

#
# /v2.0/vpn/ipsec-site-connections
#
iida-az1-connection-01:

  ipsec_site_connection:

    name: iida-az1-connection-01

    psk: secret

    peer_cidrs:
      - 10.2.0.0/24

    peer_address: x.x.x.x

    peer_id: x.x.x.x

    vpnservice_id: UUID

    ikepolicy_id: UUID

    ipsecpolicy_id: UUID

    admin_state_up: True

    initiator: bi-directional

    mtu: 1500

    dpd:
      timeout: 30
      interval: 10
      action: restart

    # アベイラビリティゾーン
    # jp-east-1a
    # jp-east-1b
    availability_zone: jp-east-1a

